import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as l,e as a}from"./app-2d0f66e1.js";const n={},r=a('<h1 id="_20、主从复制" tabindex="-1"><a class="header-anchor" href="#_20、主从复制" aria-hidden="true">#</a> 20、主从复制</h1><h3 id="一、主从复制的用途" tabindex="-1"><a class="header-anchor" href="#一、主从复制的用途" aria-hidden="true">#</a> 一、主从复制的用途</h3><ul><li><p>实时灾备，用于故障切换</p></li><li><p>读写分离，提供查询服务</p></li><li><p>备份，避免影响业务</p></li></ul><h3 id="二、主从部署必要条件" tabindex="-1"><a class="header-anchor" href="#二、主从部署必要条件" aria-hidden="true">#</a> 二、主从部署必要条件</h3><ul><li><p>主库开启binlog日志（设置log-bin参数）</p></li><li><p>主从server-id不同</p></li><li><p>从库服务器能连通主库</p></li></ul><h3 id="三、主从复制的原理" tabindex="-1"><a class="header-anchor" href="#三、主从复制的原理" aria-hidden="true">#</a> 三、主从复制的原理</h3><ul><li>Mysql 中有一种日志叫做 bin 日志（二进制日志）。这个日志会记录下所有修改了数据库的SQL 语句（insert,update,delete,create/alter/drop table, grant 等等）。</li><li>主从复制的原理其实就是把主服务器上的 bin 日志复制到从服务器上执行一遍，这样从服务器上的数据就和主服务器上的数据相同了。</li></ul><figure><img src="https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/16657/1597204636882698240/c0327525e85b4d098b0369093290b898.png" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><ol><li>主库db的更新事件(update、insert、delete)被写到binlog</li><li>主库创建一个binlog dump thread，把binlog的内容发送到从库</li><li>从库启动并发起连接，连接到主库</li><li>从库启动之后，创建一个I/O线程，读取主库传过来的binlog内容并写入到relay log</li><li>从库启动之后，创建一个SQL线程，从relay log里面读取内容，执行读取到的更新事件，将更新内容写入到slave的db</li></ol>',9),t=[r];function o(d,c){return e(),l("div",null,t)}const p=i(n,[["render",o],["__file","interview9、MySQL 的主从复制.html.vue"]]);export{p as default};
