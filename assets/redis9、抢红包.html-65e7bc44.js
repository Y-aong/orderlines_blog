import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{o as e,c as a,e as l}from"./app-2d0f66e1.js";const r={},h=l('<h1 id="_9、抢红包" tabindex="-1"><a class="header-anchor" href="#_9、抢红包" aria-hidden="true">#</a> 9、抢红包</h1><h3 id="一、需求分析" tabindex="-1"><a class="header-anchor" href="#一、需求分析" aria-hidden="true">#</a> 一、需求分析</h3><ul><li>节假日发红包抢红包，高并发业务</li><li>一个大红包分为多个小红包</li><li>每个人只可以抢一次，抢完一个就不能再抢，直到总数为0</li><li>红包过期，红包退回</li></ul><h3 id="二、问题点" tabindex="-1"><a class="header-anchor" href="#二、问题点" aria-hidden="true">#</a> 二、问题点</h3><p>拆分算法如何</p><p>每个人只可以抢一次，次数限制</p><p>原子性，没抢到一个红包就要减少一个库存</p><h3 id="三、架构设计" tabindex="-1"><a class="header-anchor" href="#三、架构设计" aria-hidden="true">#</a> 三、架构设计</h3><ul><li>发红包 <ul><li>拆分红包 <ul><li>金额总和为红包金额</li><li>每个人都可以抢到红包</li><li>保证每个人的金额几率相等</li></ul></li></ul></li><li>抢红包</li><li>记红包</li></ul><p>红包的拆分算法、红包的存储使用list，并设置红包的过期时间</p><p>用户抢红包使用Lpush 把红包从redis中出列</p><p>记红包使用hash,记录用户的id和红包金额</p><p>用户抢过之后不能在抢</p>',13),d=[h];function t(s,c){return e(),a("div",null,d)}const _=i(r,[["render",t],["__file","redis9、抢红包.html.vue"]]);export{_ as default};
